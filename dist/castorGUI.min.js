var CASTORGUI=CASTORGUI||{};var guiElements=[];var objectCreate=function(proto){function construct(){}construct.prototype=proto;return new construct();};var Extends=function(ChildClass,ParentClass){ChildClass.prototype=Object.create(ParentClass.prototype)||objectCreate(ParentClass.prototype);ChildClass.prototype.constructor=ChildClass;};(function(){CASTORGUI.GUIManager=function(canvas,css){this.canvasCss=css;this.canvas=canvas;this.groups=[];this.guiVisible=true;this.style=null;this.head=document.head||document.getElementsByTagName('head')[0]||null;this.html=document.body||document.getElementsByTagName('body')[0];if(this.head==null){this.header=document.createElement('head');this.head.appendChild(this.header);}this.addStyle(this.canvasCss);};CASTORGUI.GUIManager.prototype.addGuiElements=function(elem){guiElements.push(elem);};CASTORGUI.GUIManager.prototype.addStyle=function(css){if(this.style){this.head.removeChild(this.getElementById("styleGUI"));this.canvasCss=this.canvasCss+css;}else{this.canvasCss=this.canvasCss;}this.style=document.createElement('style');this.style.type='text/css';this.style.media='screen';this.style.id="styleGUI";if(this.style.styleSheet){this.style.styleSheet.cssText=this.canvasCss;}else{this.style.appendChild(document.createTextNode(this.canvasCss));}this.head.appendChild(this.style);};CASTORGUI.GUIManager.prototype.fadeOut=function(el){if(el){el.style.opacity=1;(function fade_moin(){if((el.style.opacity-=0.1)<0.1){el.style.display="none";el.style.opacity=0;}else if(el.style.opacity>0){requestAnimationFrame(fade_moin);}})();}};CASTORGUI.GUIManager.prototype.fadeIn=function(el){if(el){el.style.opacity=0;el.style.display="block";(function fade_plus(){var val=parseFloat(el.style.opacity);if(!((val+=0.1)>0.9)){el.style.opacity=1;requestAnimationFrame(fade_plus);}})();}};CASTORGUI.GUIManager.prototype.getElementById=function(id){return document.getElementById(id);};CASTORGUI.GUIManager.prototype.getCanvasOrigine=function(){var offsets=this.canvas.getBoundingClientRect(),offsetsTop=offsets.top||0,offsetsLeft=offsets.left||0;return{top:offsetsTop,left:offsetsLeft};};CASTORGUI.GUIManager.prototype.getCanvasWidth=function(){var offsets=this.canvas.getBoundingClientRect(),offsetsWidth=offsets.width||0,offsetsHeight=offsets.height||0;return{width:offsetsWidth,height:offsetsHeight};};CASTORGUI.GUIManager.prototype.dispose=function(){var that=this;guiElements.forEach(function(e){if(that.getElementById(e.id)){that.html.removeChild(that.getElementById(e.id));}});return;};CASTORGUI.GUIManager.prototype.setVisible=function(bool,fade){var display;var that=this;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.guiVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.guiVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){guiElements.forEach(function(e){that.getElementById(e.id).style.display=display;});}};CASTORGUI.GUIManager.prototype.isVisible=function(){return this.guiVisible;};})();var CASTORGUI=CASTORGUI||{};!(function(moduleName,definition){if(typeof define==='function'&&typeof define.amd==='object'){define(definition);}else{this[moduleName]=definition();}})('draggable',function definition(){var currentElement,fairlyHighZIndex='10';CASTORGUI.addEventListener=function(element,eventName,handler){if(element.addEventListener){element.addEventListener(eventName,handler,false);}else if(element.attachEvent){element.attachEvent('on'+eventName,handler);}else{element['on'+eventName]=handler;}};CASTORGUI.removeEventListener=function(element,eventName,handler){if(element.removeEventListener){element.removeEventListener(eventName,handler,false);}else if(element.detachEvent){element.detachEvent('on'+eventName,handler);}else{element['on'+eventName]=null;}};CASTORGUI.draggable=function(element,handle){handle=handle||element;CASTORGUI.setPositionType(element);CASTORGUI.setDraggableListeners(element);CASTORGUI.addEventListener(handle,'mousedown',function(event){CASTORGUI.startDragging(event,element);});};CASTORGUI.setPositionType=function(element){element.style.position='absolute';};CASTORGUI.setDraggableListeners=function(element){element.draggableListeners={start:[],drag:[],stop:[]};element.whenDragStarts=CASTORGUI.addListener(element,'start');element.whenDragging=CASTORGUI.addListener(element,'drag');element.whenDragStops=CASTORGUI.addListener(element,'stop');};CASTORGUI.startDragging=function(event,element){currentElement&&CASTORGUI.sendToBack(currentElement);currentElement=CASTORGUI.bringToFront(element);var initialPosition=CASTORGUI.getInitialPosition(currentElement);currentElement.style.left=CASTORGUI.inPixels(initialPosition.left);currentElement.style.top=CASTORGUI.inPixels(initialPosition.top);currentElement.lastXPosition=event.clientX;currentElement.lastYPosition=event.clientY;var okToGoOn=CASTORGUI.triggerEvent('start',{x:initialPosition.left,y:initialPosition.top,mouseEvent:event});if(!okToGoOn){return;}CASTORGUI.addDocumentListeners();};CASTORGUI.addListener=function(element,type){return function(listener){element.draggableListeners[type].push(listener);};};CASTORGUI.triggerEvent=function(type,args){var result=true;var listeners=currentElement.draggableListeners[type];for(var i=listeners.length-1;i>=0;i--){if(listeners[i](args)===false){result=false;}};return result;};CASTORGUI.sendToBack=function(element){var decreasedZIndex=fairlyHighZIndex-1;element.style['z-index']=decreasedZIndex;element.style['zIndex']=decreasedZIndex;};CASTORGUI.bringToFront=function(element){element.style['z-index']=fairlyHighZIndex;element.style['zIndex']=fairlyHighZIndex;return element;};CASTORGUI.addDocumentListeners=function(){CASTORGUI.addEventListener(document,'selectstart',CASTORGUI.cancelDocumentSelection);CASTORGUI.addEventListener(document,'mousemove',CASTORGUI.repositionElement);CASTORGUI.addEventListener(document,'mouseup',CASTORGUI.removeDocumentListeners);};CASTORGUI.getInitialPosition=function(element){var boundingClientRect=element.getBoundingClientRect();return{top:boundingClientRect.top,left:boundingClientRect.left};};CASTORGUI.inPixels=function(value){return value+'px';};CASTORGUI.cancelDocumentSelection=function(event){event.preventDefault&&event.preventDefault();event.stopPropagation&&event.stopPropagation();event.returnValue=false;return false;};CASTORGUI.repositionElement=function(event){event.preventDefault&&event.preventDefault();event.returnValue=false;var style=currentElement.style;var elementXPosition=parseInt(style.left,10);var elementYPosition=parseInt(style.top,10);var elementNewXPosition=elementXPosition+(event.clientX-currentElement.lastXPosition);var elementNewYPosition=elementYPosition+(event.clientY-currentElement.lastYPosition);style.left=CASTORGUI.inPixels(elementNewXPosition);style.top=CASTORGUI.inPixels(elementNewYPosition);currentElement.lastXPosition=event.clientX;currentElement.lastYPosition=event.clientY;CASTORGUI.triggerEvent('drag',{x:elementNewXPosition,y:elementNewYPosition,mouseEvent:event});};CASTORGUI.removeDocumentListeners=function(event){CASTORGUI.removeEventListener(document,'selectstart',CASTORGUI.cancelDocumentSelection);CASTORGUI.removeEventListener(document,'mousemove',CASTORGUI.repositionElement);CASTORGUI.removeEventListener(document,'mouseup',CASTORGUI.removeDocumentListeners);var left=parseInt(currentElement.style.left,10);var top=parseInt(currentElement.style.top,10);CASTORGUI.triggerEvent('stop',{x:left,y:top,mouseEvent:event});};return CASTORGUI.draggable;});var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIWindow=function(id,options,guimanager){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);this.id=id;this.class=options.class||"GUIWindow";this.html=document.body||document.getElementsByTagName('body')[0];this.windowPosition={x:options.x,y:options.y};this.windowSize={width:options.w,height:options.h};this.colorWindow=options.bakgroundColor||"rgba(0,0,0,0.5)";this.imageWindow=options.bakgroundImage||"";this.colorContent=options.colorContent||"rgba(0,0,0,0.1)";this.imageContent=options.imageContent;this.buttonClose=typeof options.closeButton;this.overflow=options.overflow||"auto";this.borderWindow=options.borderWindow||"2px solid black";this.borderTitle=options.borderTitle||"1px solid black";this.radiusWindow=options.radiusWindow||8;this.colorTitle=options.colorTitle||"rgba(0,0,0,0.4)";this.imageTitle=options.imageTitle||"";this.heightTitle=options.heightTitle||30;this.textAlign=options.titleTextAlign||"center";this.colorTextTitle=options.titleColor||"white";this.title=options.textTitle||"Title window";this.draggable=typeof options.draggable;this.zIndex=options.zIndex||0;this.windowVisible=false;this.addElement();};Extends(CASTORGUI.GUIWindow,CASTORGUI.GUIManager);CASTORGUI.GUIWindow.prototype.addElement=function(append,element){var window=document.createElement("div");window.style.width=this.windowSize.width+"px";window.style.height=this.windowSize.height+"px";window.style.top=(this.windowPosition.y+this.getCanvasOrigine().top)+"px";window.style.left=(this.windowPosition.x+this.getCanvasOrigine().left)+"px";window.id=this.id;window.name=this.id;window.class=this.class;window.style.zIndex=this.zIndex;window.style.background=this.colorWindow;window.style.borderRadius=this.radiusWindow+"px";window.style.backgroundImage=this.imageWindow;window.style.border=this.borderWindow;window.style.wordWrap="break-word";window.style.display="none";if(this.draggable==true||this.draggable=="undefined"){window.draggable="true";window.ondragstart=CASTORGUI.draggable(window);}var titreWindow=document.createElement("div");titreWindow.style.width=this.windowSize.width;titreWindow.style.height=this.heightTitle+"px";titreWindow.style.textAlign=this.textAlign;titreWindow.style.borderRadius="8px";titreWindow.id=this.id+"_titre";titreWindow.style.background=this.colorTitle;titreWindow.style.backgroundImage=this.imageTitle;titreWindow.style.border=this.borderTitle;titreWindow.style.cursor="move";titreWindow.innerHTML=this.title;titreWindow.style.zIndex=this.zIndex+1;titreWindow.style.color=this.colorTextTitle;titreWindow.style.wordWrap="break-word";var that=this;if(this.buttonClose==true||this.buttonClose=="undefined"){var close=document.createElement("button");close.innerHTML="X";close.id=this.id+"_button";close.style.position="absolute";close.style.borderRadius="12px";close.style.border="2px solid black";close.style.left=this.windowSize.width-12+"px";close.style.marginTop="-12px";close.style.width="25px";close.style.height="25px";close.style.zIndex=10000;close.onclick=function(){that.getElementById(that.id).style.display="none";that.windowVisible=false;};}var contentWindow=document.createElement("div");contentWindow.id=this.id+"_content";contentWindow.style.width=this.windowSize.width+"px";contentWindow.style.height=(this.windowSize.height-40)+"px";contentWindow.style.overflow=this.overflow;contentWindow.style.wordBreak="keep-all";contentWindow.style.marginTop="5px";contentWindow.style.borderRadius="8px";contentWindow.style.background=this.colorContent;contentWindow.style.backgroundImage=this.imageContent;contentWindow.style.zIndex=this.zIndex+2;this.html.appendChild(window);this.getElementById(this.id).appendChild(titreWindow);if(this.buttonClose==true||this.buttonClose=="undefined"){this.getElementById(this.id+"_titre").appendChild(close);}this.getElementById(this.id).appendChild(contentWindow);this.addGuiElements(window);};CASTORGUI.GUIWindow.prototype.add=function(element){var contentForm=this.getElementById(this.id+"_content");contentForm.style.zIndex=this.zIndex+1;element.style.zIndex+2;element.addElement(false,contentForm);};CASTORGUI.GUIWindow.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIWindow.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.windowVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.windowVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIWindow.prototype.isVisible=function(){return this.windowVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUITexture=function(id,imageUrl,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUITexture";this.imageUrl=imageUrl;this.textureClicked=callback||false;this.imageSize={width:options.w,height:options.h};this.imagePosition={x:options.x,y:options.y};this.imageVisible=true;this.zIndex=options.zIndex||1;this.html=document.body||document.getElementsByTagName('body')[0];if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUITexture,CASTORGUI.GUIManager);CASTORGUI.GUITexture.prototype.addElement=function(append,element){var img=document.createElement("img");img.src=this.imageUrl;img.style.width=this.imageSize.width+"px";img.style.height=this.imageSize.height+"px";if(append==true){img.style.top=(this.imagePosition.y+this.getCanvasOrigine().top)+"px";img.style.left=(this.imagePosition.x+this.getCanvasOrigine().left)+"px";}else{img.style.top=this.imagePosition.y+"px";img.style.left=this.imagePosition.x+"px";}img.style.position="absolute";img.style.zIndex=this.zIndex;img.id=this.id;img.name=this.id;img.class=this.class;if(this.textureClicked){var that=this;img.addEventListener('click',that.textureClicked,false);}if(append==true){this.html.appendChild(img);}else{element.appendChild(img);}this.addGuiElements(img);};CASTORGUI.GUITexture.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUITexture.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.imageVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.imageVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUITexture.prototype.isVisible=function(){return this.imageVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUITextfield=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUITextfield";this.html=document.body||document.getElementsByTagName('body')[0];this.textfieldPosition={x:options.x,y:options.y};this.textfieldSize={width:options.w,height:options.h};this.value=options.value||"";this.background=options.background||"white";this.border=options.border||"1px solid black";this.color=options.color||"black";this.placeholder=options.placeholder;this.zIndex=options.zIndex||1;this.textfieldVisible=true;this.onChangeTextfield=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUITextfield,CASTORGUI.GUIManager);CASTORGUI.GUITextfield.prototype.addElement=function(append,element){var textfield=document.createElement("input");textfield.type="text";textfield.style.width=this.textfieldSize.width+"px";textfield.style.height=this.textfieldSize.height+"px";if(append==true){textfield.style.top=(this.textfieldPosition.y+this.getCanvasOrigine().top)+"px";textfield.style.left=(this.textfieldPosition.x+this.getCanvasOrigine().left)+"px";}else{textfield.style.top=this.textfieldPosition.y+"px";textfield.style.left=this.textfieldPosition.x+"px";}textfield.style.position="absolute";textfield.id=this.id;textfield.name=this.id;textfield.class=this.class;textfield.value=this.value;textfield.placeholder=this.placeholder;textfield.style.zIndex=this.zIndex;textfield.style.background=this.background;textfield.style.border=this.border;textfield.style.color=this.color;textfield.onchange=this.onChangeTextfield;if(append==true){this.html.appendChild(textfield);}else{element.appendChild(textfield);}this.addGuiElements(textfield);};CASTORGUI.GUITextfield.prototype.getValue=function(){return this.getElementById(this.id).value;};CASTORGUI.GUITextfield.prototype.setValue=function(val){this.value=val;this.getElementById(this.id).value=val;};CASTORGUI.GUITextfield.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUITextfield.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.textfieldVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.textfieldVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUITextfield.prototype.isVisible=function(){return this.textfieldVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUITextarea=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUITextarea";this.html=document.body||document.getElementsByTagName('body')[0];this.textareaPosition={x:options.x,y:options.y};this.textareaSize={width:options.w,height:options.h};this.value=options.value||"";this.placeholder=options.placeholder;this.background=options.background||"white";this.color=options.color||"black";this.zIndex=options.zIndex||1;this.textareaVisible=true;this.onChangeTextarea=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUITextarea,CASTORGUI.GUIManager);CASTORGUI.GUITextarea.prototype.addElement=function(append,element){var textarea=document.createElement("textarea");textarea.cols=this.textareaSize.width;textarea.rows=this.textareaSize.height;if(append==true){textarea.style.top=(this.textareaPosition.y+this.getCanvasOrigine().top)+"px";textarea.style.left=(this.textareaPosition.x+this.getCanvasOrigine().left)+"px";}else{textarea.style.top=this.textareaPosition.y+"px";textarea.style.left=this.textareaPosition.x+"px";}textarea.style.position="absolute";textarea.id=this.id;textarea.name=this.id;textarea.class=this.class;textarea.innerHTML=this.value;textarea.style.zIndex=this.zIndex;textarea.style.background=this.background;textarea.style.color=this.color;textarea.onchange=this.onChangeTextarea;if(append==true){this.html.appendChild(textarea);}else{element.appendChild(textarea);}this.addGuiElements(textarea);};CASTORGUI.GUITextarea.prototype.getValue=function(){return this.getElementById(this.id).value;};CASTORGUI.GUITextarea.prototype.setValue=function(val){this.value=val;this.getElementById(this.id).value=val;};CASTORGUI.GUITextarea.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUITextarea.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.textareaVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.textareaVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUITextarea.prototype.isVisible=function(){return this.textareaVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIText=function(id,options,guimanager,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);this.append=append;if(append==null||append==undefined){this.append=true;}this.id=id;this.class=options.class||"GUIText";this.html=document.body||document.getElementsByTagName('body')[0];this.textPosition={x:options.x,y:options.y};this.textSize=options.size||30;this.color=options.color||"white";this.police=options.police||"Segoe UI";this.texte=options.text||"CastorGUI";this.zIndex=options.zIndex||1;this.bold=options.bold||"";this.italic=options.italic||"";this.position=options.position||"absolute";this.centerVertical=options.centerVertical||false;this.centerHorizontal=options.centerHorizontal||false;this.inline=options.inline||false;this.textVisible=true;this.textElement=null;this.font=null;if(this.append==true){this.addElement(this.append);}};Extends(CASTORGUI.GUIText,CASTORGUI.GUIManager);CASTORGUI.GUIText.prototype.addElement=function(append,element){this.font=this.textSize+"px "+this.police;this.textElement=document.createElement("span");if(this.inline==false){this.textElement.style.width="auto";}else{this.textElement.style.width=CASTORGUI.GUIText.getTextWidth(this.texte,this.font).w+"px";}this.textElement.style.height=CASTORGUI.GUIText.getTextWidth(this.texte,this.font).h+"px";if(append==true){this.textElement.style.top=(this.textPosition.y+this.getCanvasOrigine().top)+"px";this.textElement.style.left=(this.textPosition.x+this.getCanvasOrigine().left)+"px";}else{this.textElement.style.top=this.textPosition.y+"px";this.textElement.style.left=this.textPosition.x+"px";}this.textElement.style.display="block";this.textElement.style.position=this.position;this.textElement.style.font=this.font;this.textElement.style.color=this.color;this.textElement.style.fontStyle=this.italic;this.textElement.style.fontWeight=this.bold;this.textElement.innerHTML=this.texte;this.textElement.id=this.id;this.textElement.name=this.id;this.textElement.class=this.class;this.textElement.style.zIndex=this.zIndex;if(append==true){if(this.centerVertical=="true"){var marginTop=((this.getCanvasWidth().height/2)-(CASTORGUI.GUIText.getTextWidth(this.texte,this.font).h/2));this.textElement.style.top=(marginTop+this.getCanvasOrigine().top)+"px";}if(this.centerHorizontal=="true"){var marginTotal=(this.getCanvasWidth().width-CASTORGUI.GUIText.getTextWidth(this.texte,this.font).w);var marginLeft=(marginTotal/2);this.textElement.style.left=(marginLeft+this.getCanvasOrigine().left)+"px";}this.html.appendChild(this.textElement);}else{if(this.centerVertical=="true"){this.textElement.style.top="calc(50% - "+(CASTORGUI.GUIText.getTextWidth(this.texte,this.font).h/2)+"px)";}if(this.centerHorizontal=="true"){this.textElement.style.width="100%";this.textElement.style.textAlign="center";}element.appendChild(this.textElement);}this.addGuiElements(this.textElement);};CASTORGUI.GUIText.prototype.updateText=function(texte){if(this.append==true){this.textElement.style.width=CASTORGUI.GUIText.getTextWidth(texte,this.font).w+"px";this.textElement.style.height=CASTORGUI.GUIText.getTextWidth(texte,this.font).h+"px";this.textElement.style.top=(this.textPosition.y+this.getCanvasOrigine().top)+"px";this.textElement.style.left=(this.textPosition.x+this.getCanvasOrigine().left)+"px";}else{this.textElement.style.top=this.textPosition.y+"px";this.textElement.style.left=this.textPosition.x+"px";}if(this.centerVertical=="true"){var marginTop=((this.getCanvasWidth().height/2)-(CASTORGUI.GUIText.getTextWidth(texte,this.font).h/2));this.textElement.style.top=(marginTop+this.getCanvasOrigine().top)+"px";}if(this.centerHorizontal=="true"){var marginTotal=(this.getCanvasWidth().width-CASTORGUI.GUIText.getTextWidth(texte,this.font).w);var marginLeft=(marginTotal/2);this.textElement.style.left=(marginLeft+this.getCanvasOrigine().left)+"px";}this.textElement.innerHTML=texte;};CASTORGUI.GUIText.getTextWidth=function(texte,font){var tag=document.createElement("div");tag.style.position="absolute";tag.style.left="-999em";tag.style.display="block";tag.style.whiteSpace="nowrap";tag.style.font=font||"30px Segoe UI";tag.innerHTML=texte;document.body.appendChild(tag);var result={w:tag.clientWidth,h:tag.clientHeight};document.body.removeChild(tag);return result;};CASTORGUI.GUIText.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIText.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.textVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.textVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIText.prototype.isVisible=function(){return this.textVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUISlider=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUISlider";this.html=document.body||document.getElementsByTagName('body')[0];this.sliderPosition={x:options.x,y:options.y};this.sliderSize={width:options.w,height:options.h};this.min=options.min||0;this.max=options.max||100;this.stip=options.stip||1;this.value=options.value||(this.max/2);this.zIndex=options.zIndex||1;this.orient=options.orient||"horizontal";this.sliderVisible=true;this.onChangeSlider=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUISlider,CASTORGUI.GUIManager);CASTORGUI.GUISlider.prototype.addElement=function(append,element){var slider=document.createElement("input");slider.type="range";slider.min=this.min;slider.max=this.max;slider.value=this.value;slider.stip=this.stip;slider.class=this.class;slider.style.width=this.sliderSize.width+"px";slider.style.height=this.sliderSize.height+"px";if(append==true){slider.style.top=(this.sliderPosition.y+this.getCanvasOrigine().top)+"px";slider.style.left=(this.sliderPosition.x+this.getCanvasOrigine().left)+"px";}else{slider.style.top=this.sliderPosition.y+"px";slider.style.left=this.sliderPosition.x+"px";}slider.style.position="absolute";slider.id=this.id;slider.name=this.id;slider.style.zIndex=this.zIndex;if(this.orient=="vertical"||this.orient=="Vertical"){slider.style.writingMode="bt-lr";slider.style.WebkitAppearance="slider-vertical";}slider.oninput=this.onChangeSlider;if(append==true){this.html.appendChild(slider);}else{element.appendChild(slider);}this.addGuiElements(slider);};CASTORGUI.GUISlider.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUISlider.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.textVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.textVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUISlider.prototype.isVisible=function(){return this.sliderVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUISelect=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUISelect";this.html=document.body||document.getElementsByTagName('body')[0];this.selectPosition={x:options.x,y:options.y};this.selectSize={width:options.w,height:options.h};this.zIndex=options.zIndex||1;this.selectVisible=true;this.onChangeSelectoptions=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUISelect,CASTORGUI.GUIManager);CASTORGUI.GUISelect.prototype.addElement=function(append,element){var select=document.createElement("select");select.style.width=this.selectSize.width+"px";select.style.height=this.selectSize.height+"px";if(append==true){select.style.top=(this.selectPosition.y+this.getCanvasOrigine().top)+"px";select.style.left=(this.selectPosition.x+this.getCanvasOrigine().left)+"px";}else{select.style.top=this.selectPosition.y+"px";select.style.left=this.selectPosition.x+"px";}select.style.position="absolute";select.id=this.id;select.name=this.id;select.class=this.class;select.style.zIndex=this.zIndex;select.onchange=this.onChangeSelectoptions;if(append==true){this.html.appendChild(select);}else{element.appendChild(select);}this.addGuiElements(select);};CASTORGUI.GUISelect.prototype.addOptions=function(value,text){var options=document.createElement("option");options.value=value;options.innerHTML=text;this.getElementById(this.id).appendChild(options);};CASTORGUI.GUISelect.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUISelect.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.selectVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.selectVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUISelect.prototype.isVisible=function(){return this.selectVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIRadio=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUIRadio";this.html=document.body||document.getElementsByTagName('body')[0];this.radioPosition={x:options.x,y:options.y};this.radioSize=options.size||1.0;this.zIndex=options.zIndex||1;this.radioVisible=true;this.onClickRadio=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIRadio,CASTORGUI.GUIManager);CASTORGUI.GUIRadio.prototype.addElement=function(append,element){var radio=document.createElement("input");radio.type="radio";radio.style.width=(this.radioSize*16)+"px";radio.style.height=(this.radioSize*16)+"px";if(append==true){radio.style.top=(this.radioPosition.y+this.getCanvasOrigine().top)+"px";radio.style.left=(this.radioPosition.x+this.getCanvasOrigine().left)+"px";}else{radio.style.top=this.radioPosition.y+"px";radio.style.left=this.radioPosition.x+"px";}radio.style.position="absolute";radio.style.padding="0px";radio.style.margin="0px";radio.id=this.id;radio.class=this.class;radio.name=this.id;radio.style.zIndex=this.zIndex;radio.onclick=this.onClickRadio;if(append==true){this.html.appendChild(radio);}else{element.appendChild(radio);}this.addGuiElements(radio);};CASTORGUI.GUIRadio.prototype.isChecked=function(idElement){if(this.getElementById(idElement).checked){return true;}else{return false;}};CASTORGUI.GUIRadio.prototype.setChecked=function(idElement,value){this.getElementById(idElement).checked=value;};CASTORGUI.GUIRadio.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIRadio.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.radioVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.radioVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIRadio.prototype.isVisible=function(){return this.radioVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUILabel=function(id,options,guimanager,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUILabel";this.html=document.body||document.getElementsByTagName('body')[0];this.labelPosition={x:options.x,y:options.y};this.labelSize={width:options.w,height:options.h};this.textLabel=options.text;this.zIndex=options.zIndex||1;this.labelVisible=true;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUILabel,CASTORGUI.GUIManager);CASTORGUI.GUILabel.prototype.addElement=function(append,element){var label=document.createElement("label");if(append==true){label.style.top=(this.labelPosition.y+this.getCanvasOrigine().top)+"px";label.style.left=(this.labelPosition.x+this.getCanvasOrigine().left)+"px";}else{label.style.top=this.labelPosition.y+"px";label.style.left=this.labelPosition.x+"px";}label.style.position="absolute";label.id=this.id;label.name=this.id;label.class=this.class;label.innerHTML=this.textLabel;label.style.zIndex=this.zIndex;if(append==true){this.html.appendChild(label);}else{element.appendChild(label);}this.addGuiElements(label);};CASTORGUI.GUILabel.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUILabel.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.labelVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.labelVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUILabel.prototype.isVisible=function(){return this.labelVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIGroup=function(name,options,guimanager){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);this.html=document.body||document.getElementsByTagName('body')[0];if(options){this.groupPosition={x:options.x,y:options.y};}this.guiManager=guimanager;this.name=name;this.elementsGoup=[];this.guiManager.groups.push(this);this.groupVisible=true;};Extends(CASTORGUI.GUIGroup,CASTORGUI.GUIManager);CASTORGUI.GUIGroup.prototype.add=function(guiElement){this.elementsGoup.push(guiElement);};CASTORGUI.GUIGroup.prototype.dispose=function(){var that=this;this.elementsGoup.forEach(function(e){if(that.getElementById(e.id)){that.html.removeChild(that.getElementById(e.id));}});return;};CASTORGUI.GUIGroup.prototype.setVisible=function(bool){var display;var that=this;if(bool==true){display="block";this.groupVisible=true;}else{display="none";this.groupVisible=false;}this.elementsGoup.forEach(function(e){that.getElementById(e.id).style.display=display;});return;};CASTORGUI.GUIGroup.prototype.isVisible=function(){return this.groupVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIFieldset=function(id,options,guimanager,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUIFieldset";this.html=document.body||document.getElementsByTagName('body')[0];this.fieldsetPosition={x:options.x,y:options.y};this.fieldsetSize={width:options.w,height:options.h};this.legend=options.legend;this.zIndex=options.zIndex||1;this.fieldsetVisible=true;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIFieldset,CASTORGUI.GUIManager);CASTORGUI.GUIFieldset.prototype.addElement=function(append,element){var fieldset=document.createElement("fieldset");fieldset.style.width=this.fieldsetSize.width+"px";fieldset.style.height=this.fieldsetSize.height+"px";fieldset.style.top=(this.fieldsetPosition.y+this.getCanvasOrigine().top)+"px";fieldset.style.left=(this.fieldsetPosition.x+this.getCanvasOrigine().left)+"px";fieldset.style.position="absolute";fieldset.id=this.id;fieldset.name=this.id;fieldset.class=this.class;fieldset.style.zIndex=this.zIndex;this.html.appendChild(fieldset);var legend=document.createElement("legend");legend.innerHTML=this.legend;if(append==true){this.getElementById(this.id).appendChild(legend);}else{element.appendChild(legend);}this.addGuiElements(fieldset);};CASTORGUI.GUIFieldset.prototype.add=function(element){var contentFieldSet=this.getElementById(this.id);element.addElement(false,contentFieldSet);};CASTORGUI.GUIFieldset.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIFieldset.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.fieldsetVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.fieldsetVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIFieldset.prototype.isVisible=function(){return this.fieldsetVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUICheckbox=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUICheckbox";this.html=document.body||document.getElementsByTagName('body')[0];this.checkboxPosition={x:options.x,y:options.y};this.checkboxSize=options.size||1.0;this.zIndex=options.zIndex||1.0;this.checkboxVisible=true;this.onClickCheckbox=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUICheckbox,CASTORGUI.GUIManager);CASTORGUI.GUICheckbox.prototype.addElement=function(append,element){var checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.style.width=(this.checkboxSize*16)+"px";checkbox.style.height=(this.checkboxSize*16)+"px";if(append==true){checkbox.style.top=(this.checkboxPosition.y+this.getCanvasOrigine().top)+"px";checkbox.style.left=(this.checkboxPosition.x+this.getCanvasOrigine().left)+"px";}else{checkbox.style.top=this.checkboxPosition.y+"px";checkbox.style.left=this.checkboxPosition.x+"px";}checkbox.style.position="absolute";checkbox.style.padding="0px";checkbox.style.margin="0px";checkbox.id=this.id;checkbox.name=this.id;checkbox.class=this.class;checkbox.style.zIndex=this.zIndex;checkbox.onclick=this.onClickCheckbox;if(append==true){this.html.appendChild(checkbox);}else{element.appendChild(checkbox);}this.addGuiElements(checkbox);};CASTORGUI.GUICheckbox.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUICheckbox.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.checkboxVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.checkboxVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUICheckbox.prototype.isVisible=function(){return this.checkboxVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIButton=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUIButton";this.html=document.body||document.getElementsByTagName('body')[0];this.buttonPosition={x:options.x,y:options.y};this.buttonSize={width:options.w,height:options.h};this.value=options.value||"Ok";this.buttonVisible=true;this.onClickButton=callback||false;this.imageButton=options.backgroundImage||null;this.colorButton=options.backgroundColor||"rgba(0.5, 0.5, 0.5, 0.6)";this.borderRadiusButton=options.borderRadiusButton||"10px";this.borderButton=options.borderButton||"2px solid black";this.colorText=options.colorText||"black";this.zIndex=options.zIndex||1;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIButton,CASTORGUI.GUIManager);CASTORGUI.GUIButton.prototype.addElement=function(append,element){var button=document.createElement("button");button.style.width=this.buttonSize.width+"px";button.style.height=this.buttonSize.height+"px";if(append==true){button.style.top=(this.buttonPosition.y+this.getCanvasOrigine().top)+"px";button.style.left=(this.buttonPosition.x+this.getCanvasOrigine().left)+"px";}else{button.style.top=this.buttonPosition.y+"px";button.style.left=this.buttonPosition.x+"px";}button.innerHTML=this.value;button.style.position="absolute";button.id=this.id;button.name=this.id;button.style.zIndex=this.zIndex;button.class=this.class;button.style.background=this.colorButton;button.style.borderRadius=this.borderRadiusButton;button.style.backgroundImage=this.imageButton;button.style.border=this.borderButton;button.style.color=this.colorText;button.onclick=this.onClickButton;if(append==true){this.html.appendChild(button);}else{element.appendChild(button);}this.addGuiElements(button);};CASTORGUI.GUIButton.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIButton.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.buttonVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.buttonVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIButton.prototype.isVisible=function(){return this.buttonVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIDialog=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.html=document.body||document.getElementsByTagName('body')[0];this.class=options.class||"GUIDialog";this.dialogSize={width:options.w,height:options.h};this.dialogPosition={x:options.x,y:options.y};this.overflow=options.overflow||"auto";this.borderDialog=options.border||"2px solid black";this.colorDialog=options.backgroundColor||"rgba(0,0,0,0.5)";this.imageDialog=options.backgroundImage||"";this.buttonDialog=options.closeDialog||"true";this.imageButtonDialog=options.imageButtonDialog||"false";this.urlImage=options.urlImage||null;this.callback=callback||null;this.radius=options.radius||8;this.zIndex=options.zIndex||0;this.dialogVisible=false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIDialog,CASTORGUI.GUIManager);CASTORGUI.GUIDialog.prototype.addElement=function(append,element){var dialog=document.createElement("div");dialog.style.width=this.dialogSize.width+"px";dialog.style.height=this.dialogSize.height+"px";dialog.style.top=(this.dialogPosition.y+this.getCanvasOrigine().top)+"px";dialog.style.left=(this.dialogPosition.x+this.getCanvasOrigine().left)+"px";dialog.style.position="absolute";dialog.id=this.id;dialog.name=this.id;dialog.class=this.class;dialog.style.zIndex=this.zIndex;dialog.style.background=this.colorDialog;dialog.style.borderRadius=this.radius+"px";dialog.style.backgroundImage=this.imageDialog;dialog.style.border=this.borderDialog;dialog.style.display="none";dialog.style.overflow=this.overflow;var eventButton=null;if(append==true){this.html.appendChild(dialog);}else{element.appendChild(dialog);}if(this.buttonDialog=="true"){eventButton=document.createElement("button");eventButton.innerHTML="X";eventButton.id=this.id+"_button";eventButton.style.position="absolute";eventButton.style.borderRadius="12px";eventButton.style.border="2px solid black";eventButton.style.left=this.dialogSize.width-12+"px";eventButton.style.marginTop="-12px";eventButton.style.width="25px";eventButton.style.height="25px";eventButton.style.zIndex=10000;eventButton.onclick=function(){document.body.removeChild(dialog);};this.getElementById(this.id).appendChild(eventButton);}else if(this.imageButtonDialog=="true"){var that=this;this._getSizeImage(this.urlImage,function(result){var sizeImageW=result.w;var sizeImageH=result.h;eventButton=document.createElement("img");eventButton.src=that.urlImage;eventButton.id=that.id+"_button";eventButton.style.position="absolute";eventButton.style.left=that.dialogSize.width-(sizeImageW/2)+"px";eventButton.style.marginTop="-"+(sizeImageH/2)+"px";eventButton.style.width=sizeImageW+"px";eventButton.style.height=sizeImageH+"px";eventButton.style.cursor="pointer";eventButton.style.zIndex=10000;eventButton.onclick=that.callback;that.getElementById(that.id).appendChild(eventButton);});}else if(this.buttonDialog=="false"&&this.imageButtonDialog=="false"&&this.callback){dialog.onclick=this.callback;dialog.style.cursor="pointer";}this.addGuiElements(dialog);};CASTORGUI.GUIDialog.prototype._getSizeImage=function(URL,callback){var image=new Image();image.src=URL;image.onload=function(){var result={w:image.width,h:image.height};callback(result);};};CASTORGUI.GUIDialog.prototype.add=function(element){var contentDialog=this.getElementById(this.id);contentDialog.style.zIndex=this.zIndex+1;element.style.zIndex+2;element.addElement(false,contentDialog);};CASTORGUI.GUIDialog.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIDialog.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.dialogVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.dialogVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIDialog.prototype.isVisible=function(){return this.dialogVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIProgress=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.progress=null;this.id=id;this.class=options.class||"GUIProgress";this.html=document.body||document.getElementsByTagName('body')[0];this.progressPosition={x:options.x,y:options.y};this.progressSize={width:options.w,height:options.h};this.min=options.min||0;this.max=options.max||100;this.value=options.value||0;this.border=options.border||0;this.background=options.background||"rgba(0, 0, 0, 0.2)";this.backgroundValue=options.backgroundValue||"#0f4fff";this.borderRadius=options.borderRadius||(options.h/2)+"px";this.zIndex=options.zIndex||1;this.orient=options.orient||"horizontal";this.progressVisible=true;this.onChangeProgress=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIProgress,CASTORGUI.GUIManager);CASTORGUI.GUIProgress.prototype.addElement=function(append,element){this.progress=document.createElement("progress");this.progress.min=this.min;this.progress.max=this.max;this.progress.value=this.value;this.progress.style.width=this.progressSize.width+"px";this.progress.style.height=this.progressSize.height+"px";if(append==true){this.progress.style.top=(this.progressPosition.y+this.getCanvasOrigine().top)+"px";this.progress.style.left=(this.progressPosition.x+this.getCanvasOrigine().left)+"px";}else{this.progress.style.top=this.progressPosition.y+"px";this.progress.style.left=this.progressPosition.x+"px";}this.progress.style.position="absolute";this.progress.id=this.id;this.progress.class=this.class;this.progress.name=this.id;this.progress.style.zIndex=this.zIndex;if(this.orient=="vertical"||this.orient=="Vertical"){this.progress.style.writingMode="bt-lr";this.progress.style.WebkitAppearance="progress-vertical";}var cssProgress="#"+this.id+" {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.background+";"+"} #"+this.id+"::after {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.backgroundValue+";"+"} #"+this.id+"::-webkit-progress-bar {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.background+";"+"} #"+this.id+"::-webkit-progress-value {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.backgroundValue+";"+"} #"+this.id+"::-moz-progress-bar {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.background+";"+"}";this.addStyle(cssProgress);this.progress.onchange=this.onChangeProgress;if(append==true){this.html.appendChild(this.progress);}else{element.appendChild(this.progress);}this.addGuiElements(this.progress);};CASTORGUI.GUIProgress.prototype.updateValue=function(value){this.progress.value=value;};CASTORGUI.GUIProgress.prototype.getValue=function(){return this.progress.value;};CASTORGUI.GUIProgress.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIProgress.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.progressVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.progressVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIProgress.prototype.isVisible=function(){return this.progressVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUISpinner=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUISpinner";this.html=document.body||document.getElementsByTagName('body')[0];this.numberPosition={x:options.x,y:options.y};this.numberSize={width:options.w,height:options.h};this.min=options.min||0;this.max=options.max||100;this.stip=options.stip||1;this.value=options.value||(this.max/2);this.zIndex=options.zIndex||1;this.orient=options.orient||"horizontal";this.numberVisible=true;this.onChangeNumber=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUISpinner,CASTORGUI.GUIManager);CASTORGUI.GUISpinner.prototype.addElement=function(append,element){var number=document.createElement("input");number.type="number";number.min=this.min;number.max=this.max;number.value=this.value;number.stip=this.stip;number.style.width=this.numberSize.width+"px";number.style.height=this.numberSize.height+"px";if(append==true){number.style.top=(this.numberPosition.y+this.getCanvasOrigine().top)+"px";number.style.left=(this.numberPosition.x+this.getCanvasOrigine().left)+"px";}else{number.style.top=this.numberPosition.y+"px";number.style.left=this.numberPosition.x+"px";}number.style.position="absolute";number.id=this.id;number.name=this.id;number.class=this.class;number.style.zIndex=this.zIndex;number.oninput=this.onChangeNumber;if(append==true){this.html.appendChild(number);}else{element.appendChild(number);}this.addGuiElements(number);};CASTORGUI.GUISpinner.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUISpinner.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.numberVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.numberVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUISpinner.prototype.isVisible=function(){return this.numberVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIMeter=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.meter=nullthis.id=id;this.class=options.class||"GUIMeter";this.html=document.body||document.getElementsByTagName('body')[0];this.meterPosition={x:options.x,y:options.y};this.meterSize={width:options.w,height:options.h};this.border=options.border||0;this.background=options.background||"rgba(0, 0, 0, 0.2)";this.backgroundValue=options.backgroundValue||"#1e9100";this.min=options.min||0;this.max=options.max||100;this.value=options.value||0;this.zIndex=options.zIndex||1;this.orient=options.orient||"horizontal";this.meterVisible=true;this.onChangeMeter=callback||false;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIMeter,CASTORGUI.GUIManager);CASTORGUI.GUIMeter.prototype.addElement=function(append,element){this.meter=document.createElement("meter");this.meter.min=this.min;this.meter.max=this.max;this.meter.value=this.value;this.meter.style.width=this.meterSize.width+"px";this.meter.style.height=this.meterSize.height+"px";if(append==true){this.meter.style.top=(this.meterPosition.y+this.getCanvasOrigine().top)+"px";this.meter.style.left=(this.meterPosition.x+this.getCanvasOrigine().left)+"px";}else{this.meter.style.top=this.meterPosition.y+"px";this.meter.style.left=this.meterPosition.x+"px";}this.meter.style.position="absolute";this.meter.id=this.id;this.meter.name=this.id;this.meter.class=this.class;this.meter.style.zIndex=this.zIndex;if(this.orient=="vertical"||this.orient=="Vertical"){this.meter.style.writingMode="bt-lr";this.meter.style.WebkitAppearance="meter-vertical";}this.meter.onchange=this.onChangeMeter;var cssMeter="#"+this.id+" {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.background+";"+"} #"+this.id+"::after {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.backgroundValue+";"+"} #"+this.id+"::-webkit-progress-bar {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.background+";"+"} #"+this.id+"::-webkit-progress-value {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.backgroundValue+";"+"} #"+this.id+"::-moz-progress-bar {"+"border:"+this.border+";"+"border-radius:"+this.borderRadius+";"+"background-color:"+this.background+";"+"}";this.addStyle(cssMeter);if(append==true){this.html.appendChild(this.meter);}else{element.appendChild(this.meter);}this.addGuiElements(this.meter);};CASTORGUI.GUIMeter.prototype.updateValue=function(value){this.meter.value=value;};CASTORGUI.GUIMeter.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIMeter.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.meterVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.meterVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIMeter.prototype.isVisible=function(){return this.meterVisible;};})();var CASTORGUI=CASTORGUI||{};(function(){CASTORGUI.GUIPanel=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);if(append==null||append==undefined){append=true;}this.id=id;this.class=options.class||"GUIMeter";this.html=document.body||document.getElementsByTagName('body')[0];this.divPosition={x:options.x,y:options.y};this.divSize={width:options.w,height:options.h};this.divVisible=false;this.overflow=options.overflow||"auto";this.borderRadiusDiv=options.borderRadiusPanel||"10px";this.imageDiv=options.backgroundImage||null;this.colorDiv=options.backgroundColor||"black";this.borderDiv=options.borderPanel||"2px solid black";this.position=options.position||"absolute";this.zIndex=options.zIndex||1;if(append==true){this.addElement(append);}};Extends(CASTORGUI.GUIPanel,CASTORGUI.GUIManager);CASTORGUI.GUIPanel.prototype.addElement=function(append,element){var div=document.createElement("div");if(this.divSize.width>0||this.divSize.height>0){div.style.width=this.divSize.width+"px";div.style.height=this.divSize.height+"px";}if(append==true){if(this.divPosition.x>0){div.style.left=(this.divPosition.x+this.getCanvasOrigine().left)+"px";}if(this.divPosition.y>0){div.style.top=(this.divPosition.y+this.getCanvasOrigine().top)+"px";}}else{if(this.divPosition.x>0){div.style.marginLeft=this.divPosition.x+"px";}if(this.divPosition.y>0){div.style.marginTop=this.divPosition.y+"px";}}div.id=this.id;div.name=this.id;div.class=this.class;div.style.position=this.position;div.style.overflow=this.overflow;div.style.zIndex=this.zIndex;div.style.backgroundImage=this.imageDiv;div.style.backgroundColor=this.colorDiv;div.style.borderRadius=this.borderRadiusDiv;div.style.border=this.borderDiv;div.style.display="none";if(append==true){this.html.appendChild(div);}else{element.appendChild(div);}this.addGuiElements(div);};CASTORGUI.GUIPanel.prototype.add=function(element){var contentPanel=this.getElementById(this.id);contentPanel.style.zIndex=this.zIndex+1;element.style.zIndex+2;element.addElement(false,contentPanel);};CASTORGUI.GUIPanel.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));};CASTORGUI.GUIPanel.prototype.setVisible=function(bool,fade){var display;if(fade==undefined)fade=true;var element=this.getElementById(this.id);if(bool==true){display="block";this.divVisible=true;if(fade==true){this.fadeIn(element);}}else{display="none";this.divVisible=false;if(fade==true){this.fadeOut(element);}}if(fade==false){element.style.display=display;}};CASTORGUI.GUIPanel.prototype.isVisible=function(){return this.divVisible;};})();